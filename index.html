<!DOCTYPE html>
<html>
	<head>
		<title>Infinite Mario - JavaScript</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<style>
			body {
				margin: 0;
				padding: 0;
				display: flex;
				justify-content: center;
				align-items: center;
				min-height: 100vh;
				background: #000;
				overflow: hidden;
			}
			canvas {
				position: absolute;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas" width="640" height="480">
			<p>Your browser does not support the canvas element.</p>
		</canvas>
        <script type="module" src="/src/main.ts"></script>
        <script>
            function resizeCanvas() {
                const canvas = document.getElementById('canvas');
                const aspectRatio = 640 / 480;
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;
                
                let width, height;
                
                if (windowWidth / windowHeight > aspectRatio) {
                    // 窗口更宽，以高度为基准
                    height = windowHeight;
                    width = height * aspectRatio;
                } else {
                    // 窗口更高，以宽度为基准
                    width = windowWidth;
                    height = width / aspectRatio;
                }
                
                canvas.style.width = width + 'px';
                canvas.style.height = height + 'px';
            }

            window.addEventListener('resize', resizeCanvas);
            // 初始化时也调用一次
            resizeCanvas();
        </script>
	</body>
</html>